---
import type { HTMLAttributes } from 'astro/types';
import { cva, type VariantProps } from 'class-variance-authority';
import { cn } from 'src/utils/cn';

const hamburgerToggleVariants = cva('', {
  variants: {
    variant: {
      default: 'bg-accent2',
    },
    size: {
      small: ['h-6 w-10'],
      medium: ['h-9 w-14'],
      large: ['h-11 w-20'],
    },
  },
  defaultVariants: {
    variant: 'default',
    size: 'medium',
  },
  compoundVariants: [],
});

export type HamburgerToggleProps = VariantProps<typeof hamburgerToggleVariants>;

interface Props extends HTMLAttributes<'label'>, HamburgerToggleProps {}

const { variant, size, class: className } = Astro.props;
---

<div id='menuToggle' class=`relative ${className}`>
  <!-- <label class='relative cursor-pointer'> -->
  <input
    type='checkbox'
    class='absolute block h-10 w-8 cursor-pointer opacity-0'
  />
  <span></span>
  <span></span>
  <span></span>
  <!-- </label> -->
  <slot />

  <style>
    /*
* Just a quick hamburger
*/
    span {
      display: block;
      width: 33px;
      height: 4px;
      margin-bottom: 5px;
      position: relative;

      background: #000000;
      border-radius: 3px;
      z-index: 1;

      transform-origin: 4px 0px;

      transition:
        transform 0.5s cubic-bezier(0.77, 0.2, 0.05, 1),
        background 0.5s cubic-bezier(0.77, 0.2, 0.05, 1),
        opacity 0.55s ease;
    }

    span:first-child {
      transform-origin: 0% 0%;
    }

    span:nth-last-child(2) {
      transform-origin: 0% 100%;
    }

    /* 
* Transform all the slices of hamburger
* into a crossmark.
*/
    input:checked ~ span {
      opacity: 1;
      transform: rotate(45deg) translate(-2px, -1px);
      background: #232323;
    }

    /*
* But let's hide the middle one.
*/
    input:checked ~ span:nth-last-child(3) {
      opacity: 0;
      transform: rotate(0deg) scale(0.2, 0.2);
    }

    /*
* Ohyeah and the last one should go the other direction
*/
    input:checked ~ span:nth-last-child(2) {
      transform: rotate(-45deg) translate(0, -1px);
    }

    /*
* Make this absolute positioned
* at the top left of the screen
*/
    #menu {
      position: absolute;
      transform-origin: 0% 0%;
      transform: translate(-100%, 0);
      transition: transform 0.5s cubic-bezier(0.77, 0.2, 0.05, 1);
    }

    /*
* And let's slide it in from the left
*/
    #menuToggle input:checked ~ #menu {
      transform: none;
    }
  </style>
</div>
