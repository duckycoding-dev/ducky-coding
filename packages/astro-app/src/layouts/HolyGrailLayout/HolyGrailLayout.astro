---
import { BaseHtml, type BaseHtmlProps } from '@layouts/BaseHtml';
import { Footer } from '@layouts/Footer';
import { Header } from '@layouts/Header';
import { MainContent } from '@layouts/MainContent';
import type { HTMLAttributes } from 'astro/types';
import { serverLogger as logger } from '@utils/logs/logger';

logger.setShowTimestamp(true);
logger.error('hello holy');
export type HolyGrailLayoutProps = BaseHtmlProps;

interface Props extends HTMLAttributes<'html'>, HolyGrailLayoutProps {}

const { ...props }: Props = Astro.props;
---

<BaseHtml {...props}>
  <Header />
  <MainContent class='px-4 py-8 md:px-8'>
    <slot />
    <!-- your content is injected here -->
  </MainContent>
  <Footer />
</BaseHtml>

<script>
  // Swipe detection variables
  let touchstartX = 0;
  let touchendX = 0;
  const minSwipeDistance = 50; // Minimum distance to be considered a swipe

  const checkbox = document.getElementById(
    'site_side_navigation_menu_id',
  ) as HTMLInputElement;

  function handleTouchStart(event: TouchEvent) {
    touchstartX = event.changedTouches[0].screenX;
  }

  // Function to determine swipe direction and update checkbox
  function handleSwipe() {
    const swipeDistance = touchendX - touchstartX;

    if (Math.abs(swipeDistance) < minSwipeDistance) {
      return; // Not a significant swipe
    }

    if (swipeDistance > 0) {
      // Right swipe
      checkbox.checked = true;
    } else {
      // Left swipe
      checkbox.checked = false;
    }
  }

  function handleTouchEnd(event: TouchEvent) {
    touchendX = event.changedTouches[0].screenX;
    handleSwipe();
  }

  // Add event listeners
  document.addEventListener('touchstart', handleTouchStart, false);
  document.addEventListener('touchend', handleTouchEnd, false);
</script>
