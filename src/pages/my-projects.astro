---
import HolyGrailLayout from '@layouts/HolyGrailLayout/HolyGrailLayout.astro';
import Card from '@components/Card/Card.astro';
import Link from '@components/Link/Link.astro';
import ProjectCard, {
  type ProjectCardProps,
} from '@components/Card/ProjectCard.astro';
import XIcon from '@components/Icons/XIcon/XIcon.astro';
import LinkedInIcon from '@components/Icons/LinkedInIcon/LinkedInIcon.astro';
import type { ComponentProps } from 'astro/types';
import TechnologyCard from '@components/Card/TechnologyCard.astro';
import pentaNewsLogo from '@assets/images/penta_news_logo.png';
import leetCodeLogo from '@assets/images/topics/leetcode_logo.png';
import DuckyCodingLogo from '@assets/images/DuckyCoding_logo.png';
import { WEBSITE_FIRST_PUBLISHING_DATE } from '@utils/globals';

const thisWebsiteOrigin = Astro.url.origin;

const frontendTechnologies = [
  'HTML',
  'Modern CSS',
  'Astro',
  'Tailwind CSS',
  'React',
  'Hooks',
  'Context API',
  'Redux',
  'Next.js',
  'Styled Components',
];

const backendTechnologies = [
  'Node.js',
  'Hono',
  'SQL',
  'Drizzle ORM',
  'AWS Lambda',
];

const tools = [
  'Git',
  'CLI',
  'Zod',
  'clean code',
  'VSCode',
  'Postman',
  'ESLint',
  'Prettier',
];

const technologies: ComponentProps<typeof TechnologyCard>[] = [
  {
    emoji: '‚öõÔ∏è',
    title: 'Frontend',
    description: `${frontendTechnologies.join(', ')} and more...`,
    class: 'bg-accent-100',
  },
  {
    emoji: 'üíª',
    title: 'Backend',
    description: `${backendTechnologies.join(', ')} and more...`,
    class: 'bg-accent2-100',
  },
  {
    emoji: 'üî†',
    title: 'Programming languages',
    description: 'Modern JS, TypeScript, OOP with C++ and a sprinkle of PHP',
    class: 'bg-accent3-100',
  },
  {
    emoji: 'üîß',
    title: 'Tools',
    description: `${tools.join(', ')} and more...`,
    class: 'bg-primary-200',
  },
];

// Mock project data - replace with your actual projects
const projects: ProjectCardProps[] = [
  {
    title: 'duckycoding.dev (this website)',
    summary:
      'Fast, modern portfolio website showcasing projects and skills, built with Astro and optimized for performance, easy management and SEO.',
    technologies: [
      'Astro',
      'Netlify',
      'Tailwind',
      'TypeScript',
      'SEO',
      'MDX',
      'Drizzle ORM',
      'SQLite',
    ],
    projectUrl: 'https://duckycoding.dev',
    linkActionTitle: 'Live Site',
  },
  {
    title: 'Task Manager App',
    summary:
      'This is a monorepo which contains the code for the backend of a task manager app, which will be reused in many other frontend packages to test different frontend libraries while mantaining a standard backend logic: this will allow me to develop mini projects faster and experiment with new technologies.',
    technologies: [
      'Hono',
      'Drizzle ORM',
      'Zod',
      'REST API',
      'React',
      'Shadcn/ui',
      'more...',
    ],
    projectUrl:
      'https://github.com/duckycoding-dev/reusable_task_manager_backend',
    linkActionTitle: 'GitHub',
  },
  {
    title: 'LeetCode solutions',
    bannerImage: leetCodeLogo,
    imageAlt: "LeetCode's platform logo",
    summary:
      "My repository of LeetCode problems solutions that I've written, showcasing problem-solving skills and algorithmic thinking.",
    technologies: ['Algorithms', 'Data Structures', 'JavaScript', 'Python'],
    projectUrl:
      'https://github.com/duckycoding-dev/neecode-leetcode-roadmap-exercises',
    linkActionTitle: 'GitHub',
    bannerImageClass: 'from-danger to-accent2 bg-gradient-to-tl',
  },
  {
    title: 'CLI Templater',
    summary:
      'Customizable and interactive CLI tool that aids in setting up repetitive files with a common structure.',
    technologies: ['CLI', 'CommanderJS', 'inquirer', 'TypeScript', 'Bun'],
    projectUrl: 'https://github.com/duckycoding-dev/cli-templater',
    linkActionTitle: 'GitHub',
  },
  {
    title: 'PentaNews',
    bannerImage: pentaNewsLogo,
    imageAlt: 'PentaNews logo',
    summary:
      "My first ever web development project, done for my web development course at Padua's university with three friends. It's an online journalism platform that allows users to read and comment on news articles, and admins to create such articles. It's built with PHP, bare minimum vanilla JavaScript, tons of CSS, MySQL and great emphasis on responsive design and accessibility. (unfortunately, the website is no longer online, but the code is still available on my friend's GitHub repo)",
    technologies: ['PHP', 'JavaScript', 'CSS', 'MySQL'],
    projectUrl: 'https://github.com/0xCaso/penta-news',
    linkActionTitle: 'GitHub',
  },
  {
    title: 'Chartpp',
    summary:
      "My first solo project, done for my OOP course at Padua's university. It's a GUI application built with Qt that allows you to create and edit charts, export them as CSV and JSON, with a focus on object-oriented programming principles.",
    technologies: ['C++', 'OOP', 'Qt', 'JSON'],
    projectUrl: 'https://github.com/Davide-Milan/Chartpp',
    linkActionTitle: 'GitHub',
  },
];

const pageUrl = Astro.url.href;
---

<HolyGrailLayout
  seoProps={{
    title: 'My Projects',
    description:
      'Explore the portfolio of DuckyCoding - showcasing various web development projects, applications, and experiments.',
    openGraph: {
      basic: {
        title: "DuckyCoding's projects",
        type: 'website',
        url: pageUrl,
        image: DuckyCodingLogo.src,
      },
      optional: {
        description:
          'Explore the portfolio of DuckyCoding - showcasing various web development projects, applications, and experiments.',
        locale: 'en_US',
        siteName: 'DuckyCoding',
        localeAlternate: ['en_GB'],
        determiner: '',
        audio: undefined,
        video: undefined,
      },
      image: {
        url: DuckyCodingLogo.src,
        secureUrl: DuckyCodingLogo.src,
        height: DuckyCodingLogo.height,
        width: DuckyCodingLogo.width,
        type: `image/${DuckyCodingLogo.format}`,
        alt: "DuckyCoding's logo",
      },
      article: {
        publishedTime: WEBSITE_FIRST_PUBLISHING_DATE,
        modifiedTime: WEBSITE_FIRST_PUBLISHING_DATE,
        section: 'Web Development',
        authors: ['DuckyCoding', 'Davide'],
        tags: [
          'DuckyCoding',
          'Davide',
          'projects',
          'portfolio',
          'web development',
          'applications',
          'GitHub',
        ],
      },
    },
    twitter: {
      card: 'summary_large_image',
      site: '@ducky_coding',
      creator: '@ducky_coding',
      title: "DuckyCoding's projects",
      description:
        'Explore the portfolio of DuckyCoding - showcasing various web development projects, applications, and experiments.',
      image: DuckyCodingLogo.src,
      imageAlt: "DuckyCoding's logo",
    },
    extend: {
      meta: [
        {
          name: 'keywords',
          content:
            'DuckyCoding, projects, portfolio, web development, applications, GitHub',
        },
      ],
    },
  }}
>
  <!-- Hero Section -->
  <section class='mb-16 text-center'>
    <h1
      class='text-secondary mb-6 text-4xl leading-tight font-black md:text-5xl lg:text-6xl'
    >
      My <span class='text-accent-700'>projects</span>
    </h1>
    <Card
      class='from-accent3-100 to-accent2-100 mb-8 bg-gradient-to-r p-6 md:p-8'
    >
      <h2 class='text-secondary mb-4 text-2xl font-bold md:text-3xl'>
        üöÄ Featured Work
      </h2>
      <p class='text-secondary mb-6'>
        Here you will find a collection of projects that showcase my skills and
        experience in web development, from frontend interfaces to full-stack
        applications, CLI tools, scripts and much more.
      </p>
      <div class='flex flex-wrap justify-center gap-4'>
        <Link
          rel='noopener noreferrer'
          href='#projects'
          variant='contained'
          size='large'
          class='px-8 py-4 text-2xl sm:text-3xl'
        >
          Browse Projects
        </Link>
      </div>
    </Card>
  </section>

  <!-- Projects Grid -->
  <section id='projects' class='mb-16'>
    <h2 class='text-secondary mb-8 text-center text-3xl font-black md:text-4xl'>
      Project <span class='text-accent-700'>showcase</span>
    </h2>
    <div class='grid grid-cols-1 gap-8 md:grid-cols-2 lg:grid-cols-3'>
      {
        projects.map((project, index) => (
          <Link
            href={project.projectUrl || '#'}
            variant='unstyled'
            class='group block'
            target={
              project.projectUrl === thisWebsiteOrigin ? '_self' : '_blank'
            }
            rel='noopener noreferrer'
          >
            <ProjectCard
              title={project.title}
              summary={project.summary}
              technologies={project.technologies}
              projectUrl={project.projectUrl}
              linkActionTitle={project.linkActionTitle}
              bannerImage={project.bannerImage}
              bannerImageClass={project.bannerImageClass}
              imageAlt={`Banner image for ${project.title}`}
              loading={index < 3 ? 'eager' : 'lazy'}
            />
          </Link>
        ))
      }
    </div>
  </section>

  <!-- Technologies Section -->
  <section id='technologies' class='mb-16'>
    <h2 class='text-secondary mb-8 text-center text-3xl font-black md:text-4xl'>
      Technologies I <span class='text-accent-700'>USE</span>
    </h2>
    <div class='grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-4'>
      {technologies.map((tech) => <TechnologyCard {...tech} />)}
    </div>
  </section>

  <!-- Contact CTA -->
  <section class='text-center'>
    <Card class='from-accent-100 to-accent3-100 bg-gradient-to-br p-8 md:p-12'>
      <h2 class='text-secondary mb-6 text-3xl font-black md:text-4xl'>
        Let's build something amazing!
      </h2>
      <p class='text-secondary mx-auto mb-8 max-w-2xl text-lg md:text-xl'>
        This is just a glimpse of my work.
        <br />
        If you're interested in collaborating, have a project idea, or just want
        to chat about tech, I'd love to hear from you!
      </p>
      <div class='flex justify-center gap-4'>
        <Link
          target='_blank'
          href='https://x.com/ducky_coding'
          variant={'outlined'}
          class='text-secondary border-secondary'
          rel='noopener noreferrer'
        >
          <XIcon size={50} />
        </Link>
        <Link
          target='_blank'
          href='https://www.linkedin.com/in/davide-m-997874254/'
          variant={'outlined'}
          class='text-secondary border-secondary'
          rel='noopener noreferrer'
        >
          <LinkedInIcon size={50} />
        </Link>
      </div>
    </Card>
  </section>
</HolyGrailLayout>

<style>
  /* Custom animations for project interactions */
  @keyframes pulse-border {
    0%,
    100% {
      border-color: var(--color-accent);
      box-shadow: 0 0 0 0 rgba(255, 61, 233, 0.4);
    }
    50% {
      border-color: var(--color-accent-700);
      box-shadow: 0 0 0 8px rgba(255, 61, 233, 0);
    }
  }

  /* Add subtle animations to filter buttons */
  section:nth-of-type(2) button:hover {
    animation: pulse-border 1.5s infinite;
  }

  /* Stagger animation for project cards on page load */
  @media (min-width: 768px) {
    section:nth-of-type(3) .grid > :nth-child(1) {
      animation: slideInUp 0.6s ease-out;
      animation-delay: 0.1s;
      animation-fill-mode: both;
    }
    section:nth-of-type(3) .grid > :nth-child(2) {
      animation: slideInUp 0.6s ease-out;
      animation-delay: 0.2s;
      animation-fill-mode: both;
    }
    section:nth-of-type(3) .grid > :nth-child(3) {
      animation: slideInUp 0.6s ease-out;
      animation-delay: 0.3s;
      animation-fill-mode: both;
    }
    section:nth-of-type(3) .grid > :nth-child(4) {
      animation: slideInUp 0.6s ease-out;
      animation-delay: 0.4s;
      animation-fill-mode: both;
    }
    section:nth-of-type(3) .grid > :nth-child(5) {
      animation: slideInUp 0.6s ease-out;
      animation-delay: 0.5s;
      animation-fill-mode: both;
    }
    section:nth-of-type(3) .grid > :nth-child(6) {
      animation: slideInUp 0.6s ease-out;
      animation-delay: 0.6s;
      animation-fill-mode: both;
    }
  }

  @keyframes slideInUp {
    from {
      opacity: 0;
      transform: translateY(30px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  /* Responsive grid adjustments */
  @media (max-width: 768px) {
    section:nth-of-type(3) .grid {
      grid-template-columns: 1fr;
    }
  }

  @keyframes float {
    0%,
    100% {
      transform: translateY(0px);
    }
    50% {
      transform: translateY(-10px);
    }
  }

  /* Add floating animation to fun facts cards on larger screens */
  @media (min-width: 768px) {
    #technologies > div > :nth-child(1) {
      animation: float 3s ease-in-out infinite;
      animation-delay: 0s;
    }
    #technologies > div > :nth-child(2) {
      animation: float 3s ease-in-out infinite;
      animation-delay: 0.5s;
    }
    #technologies > div > :nth-child(3) {
      animation: float 3s ease-in-out infinite;
      animation-delay: 1s;
    }
    #technologies > div > :nth-child(4) {
      animation: float 3s ease-in-out infinite;
      animation-delay: 1.5s;
    }
  }

  @media (prefers-reduced-motion) {
    section:nth-of-type(3) .grid > :nth-child(n) {
      animation: none;
    }
  }
</style>
