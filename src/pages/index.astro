---
import HolyGrailLayout from '@layouts/HolyGrailLayout/HolyGrailLayout.astro';
import Card from '@components/Card/Card.astro';
import { Image } from 'astro:assets';
import headshotDavide from '@assets/images/head-shot-davide.jpg';
import { WEBSITE_FIRST_PUBLISHING_DATE, WEBSITE_ROOT } from '../utils/globals';
import Link from '../components/Link/Link.astro';
import type { ComponentProps } from 'astro/types';
import TimelineCard from '../components/Card/TimelineCard.astro';
import '@styles/markdown.css';
import FunfactCard from '../components/Card/FunfactCard.astro';
import DuckyCodingLogo from '@assets/images/DuckyCoding_logo.png';
import { DuckyCodingPerson } from '@utils/jsonld/person';
import { DuckyCodingWebsite } from '@utils/jsonld/website';

const timelineObjects: ComponentProps<typeof TimelineCard>[] = [
  {
    roleTitle: 'Fullstack web developer',
    period: '2023 - Present',
    logo: '🏄‍♂️',
    place: 'Wavelop',
    link: 'https://wavelop.com/en',
    children: `
    <p class='text-secondary'>
      As a Junior fullstack developer, I worked on multiple web applications for one of our clients, including:</p>
      <ul>
      <li>B2B web applications</li>
      <li>An IoT client web app</li>
      <li>A corporate site</li>
      </ul>

<p>In my role, I’ve covered a variety of tasks, including:</p>
<ul>
<li>Fixing bugs and improving existing features</li>
<li>Analyzing client requests and planning implementations</li>
<li>Developing new features based on client requirements</li>
<li>Writing unit tests to ensure code reliability</li>
<li>Reviewing merge requests and collaborating with teammates</li>
<li>Managing manual deployments in DEV and PROD environments</li>
<li>Communicating with clients when needed</li>
</ul>

<p>I've worked with monorepos, using mostly:</p>
<ul>
<li>Frontend: React ⚛️, Next.js, Styled Components, Redux</li>
<li>Backend: Node.js with a controller-service-repository architecture, MySQL 🛢️, Jest for testing</li>
<li>Tools: TypeScript, Git</li>
</ul>
<p>I also laid the foundation for the company’s latest website using Next.js, Tailwind, and Strapi 🏗️ <br/>Throughout my work, I’ve used TypeScript extensively on both the frontend and backend.</p>`,
  },
  {
    roleTitle: 'Fullstack web developer - internship',
    logo: '🏄‍♂️',
    period: 2023,
    place: 'Wavelop',
    link: 'https://wavelop.com/en',
    children:
      "Internship as a fullstack web developer required by my university course in order to graduate. I've gained first hand experience in web development, working on a real project. This has been my first real job experience in the field, and I have had the chance to try out many different technologies and tools, such as React, TypeScript, Node.js and more.",
  },
  {
    roleTitle: 'Bachelor degree in Computer Science',
    logo: '📚',
    period: '2019 - 2023',
    place: 'University of Padua',
    link: 'https://informatica.math.unipd.it/en/bachelor/',
    children:
      "During my Bachelor's degree in Computer Science at the University of Padua, I gained a solid foundation in programming, algorithms, data structures, and software engineering. I explored topics such as web development, databases, computer networks, and mathematics, and worked on a few group projects that strengthened my problem-solving and teamwork skills.",
  },
];

const funFacts: ComponentProps<typeof FunfactCard>[] = [
  {
    emoji: '👨‍🌾',
    title: 'Gardener',
    description: 'Hot peppers enjoyer',
    class: 'bg-accent-100',
  },
  {
    emoji: '🎮',
    title: 'Gamer',
    description: 'Since I was a little kid',
    class: 'bg-accent2-100',
  },
  {
    emoji: '📚',
    title: 'Learner',
    description: 'Always exploring new tech',
    class: 'bg-accent3-100',
  },
  {
    emoji: '🦆',
    title: 'Duck lover',
    description: 'Quack quack quack',
    class: 'bg-primary-200',
  },
];

const pageUrl = Astro.url.href;

// JSON-LD structured data for homepage
const homepageJsonLd = {
  item: {
    '@context': 'https://schema.org',
    ...DuckyCodingPerson,
    mainEntityOfPage: DuckyCodingWebsite,
  },
} as const;
---

<HolyGrailLayout
  seoProps={{
    title: 'Homepage',
    description:
      "I'm Davide, aka DuckyCoding, a passionate web developer who loves crafting modern digital experiences, sharing what I learn along my path with everyone online.",
    openGraph: {
      basic: {
        title: 'DuckyCoding',
        type: 'website',
        url: pageUrl,
        image: new URL(DuckyCodingLogo.src, WEBSITE_ROOT).href,
      },
      optional: {
        description:
          "I'm Davide, aka DuckyCoding, a passionate web developer who loves crafting modern digital experiences, sharing what I learn along my path with everyone online.",
        locale: 'en_US',
        siteName: 'DuckyCoding',
        localeAlternate: ['en_GB'],
        determiner: '',
        audio: undefined,
        video: undefined,
      },
      image: {
        url: new URL(DuckyCodingLogo.src, WEBSITE_ROOT).href,
        secureUrl: new URL(DuckyCodingLogo.src, WEBSITE_ROOT).href,
        height: DuckyCodingLogo.height,
        width: DuckyCodingLogo.width,
        type: `image/${DuckyCodingLogo.format}`,
        alt: "DuckyCoding's logo",
      },
      article: {
        publishedTime: WEBSITE_FIRST_PUBLISHING_DATE,
        modifiedTime: WEBSITE_FIRST_PUBLISHING_DATE,
        section: 'Web Development',
        authors: ['DuckyCoding', 'Davide'],
        tags: [
          'DuckyCoding',
          'Davide',
          'developer',
          'web development',
          'blog',
          'frontend',
          'backend',
          'journey',
        ],
      },
    },
    twitter: {
      card: 'summary_large_image',
      site: '@ducky_coding',
      creator: '@ducky_coding',
      title: 'DuckyCoding',
      description:
        "I'm Davide, aka DuckyCoding, a passionate web developer who loves crafting modern digital experiences, sharing what I learn along my path with everyone online.",
      image: new URL(DuckyCodingLogo.src, WEBSITE_ROOT).href,
      imageAlt: "DuckyCoding's logo",
    },
    extend: {
      meta: [
        {
          name: 'keywords',
          content:
            'DuckyCoding, Davide, developer, web development, blog, frontend, backend, journey',
        },
      ],
    },
  }}
  jsonLd={homepageJsonLd}
>
  <!-- Hero Section -->
  <section id='hero' class='mb-8 md:mb-12'>
    <div
      class='grid grid-cols-1 gap-8 sm:grid-cols-[repeat(auto-fit,minmax(300px,1fr))] md:grid-cols-[1fr_auto]'
    >
      <div>
        <h1
          class='text-secondary mb-6 text-3xl leading-tight font-black md:text-4xl lg:text-6xl'
        >
          Hi, I'm <span class='text-accent-700 wrap-break-word sm:wrap-normal'
            >DuckyCoding!</span
          >
        </h1>
        <p class='text-secondary text-lg leading-relaxed md:text-xl'>
          <span
            >I'm Davide, a passionate web developer from Italy 🇮🇹 who loves
            building modern, user-friendly digital experiences.</span
          >
          <br />
          <span
            >Whether you're here to learn more about my journey, read some
            articles, explore my projects or are just passing by, I'm glad you
            are here! 😃</span
          >
        </p>
      </div>
      <div class='aspect-square md:h-80 lg:h-96'>
        <Card class='flex h-full w-full items-baseline md:items-baseline'>
          <Image
            format={'avif'}
            widths={[200, 300, 316, 380, 400, 600, 632, 760]}
            sizes={`
              (max-width: 664px) calc(50vw - 4rem),
              ((min-width: 665px) and (max-width: 975px)) 316px, 380px
            `}
            loading={'eager'}
            decoding={'async'}
            fetchpriority={'high'}
            title={'Davide - DuckyCoding'}
            src={headshotDavide}
            width={350}
            height={350}
            alt='Davide - DuckyCoding'
            class='h-fit w-full'
          />
        </Card>
      </div>
    </div>
  </section>

  <!-- About Cards Grid -->
  <section class='mb-16'>
    <h2 class='text-secondary mb-8 text-center text-3xl font-black md:text-4xl'>
      What I do
    </h2>
    <div class='grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3'>
      <Card class='bg-accent2-100 p-6'>
        <div
          class='bg-danger mb-4 flex h-16 w-16 items-center justify-center rounded-lg'
        >
          <span class='text-3xl font-bold text-white'>🎨</span>
        </div>
        <h3 class='text-secondary mb-3 text-xl font-bold'>
          Frontend Development
        </h3>
        <p class='text-secondary'>
          I enjoy crafting beautiful, responsive user interfaces that provide a
          seamless experience across devices.
          <br />
          Writing clean, maintainable code is my priority (...and I love using CSS!)
        </p>
      </Card>

      <Card class='bg-accent3-100 p-6'>
        <div
          class='bg-danger mb-4 flex h-16 w-16 items-center justify-center rounded-lg'
        >
          <span class='text-3xl font-bold text-white'>⚙️</span>
        </div>
        <h3 class='text-secondary mb-3 text-xl font-bold'>
          Backend Development
        </h3>
        <p class='text-secondary'>
          I always strive to build robust and 100% typesafe backend systems that
          power the applications I create.
          <br />
          I enjoy working with Node.js, TypeScript and modern libraries.
        </p>
      </Card>

      <Card class='bg-accent-100 p-6 md:col-span-2 lg:col-span-1'>
        <div
          class='bg-danger mb-4 flex h-16 w-16 items-center justify-center rounded-lg'
        >
          <span class='text-3xl font-bold text-white'>🚀</span>
        </div>
        <h3 class='text-secondary mb-3 text-xl font-bold'>
          Full Stack Solutions
        </h3>
        <p class='text-secondary'>
          Be it frontend or backend, I love building full stack applications
          that deliver a complete user experience, from start to finish.
        </p>
      </Card>
    </div>
  </section>

  <!-- Fun Facts -->
  <section id='fun-facts' class='mb-16'>
    <h2 class='text-secondary mb-8 text-center text-3xl font-black md:text-4xl'>
      <span class='text-accent-700'>Fun facts</span> about me
    </h2>
    <div class='grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-4'>
      {funFacts.map((fact) => <FunfactCard {...fact} />)}
    </div>
  </section>

  <!-- Experience Timeline -->
  <section class='mb-16'>
    <h2 class='text-secondary mb-8 text-center text-3xl font-black md:text-4xl'>
      My <span class='text-accent-700'>journey</span> so Far
    </h2>
    <div class='space-y-8'>
      {
        timelineObjects.map((item) => (
          <TimelineCard
            logo={item.logo}
            class='block'
            roleTitle={item.roleTitle}
            period={item.period}
            place={item.place}
            link={item.link}
          >
            {typeof item.children === 'string' ? (
              item.children.trim().startsWith('<') &&
              item.children.trim().endsWith('>') ? (
                // If children is HTML, render it as HTML
                <div
                  class='markdown-content'
                  set:html={item.children}
                  class='text-secondary'
                />
              ) : (
                <p class='text-secondary'>{item.children}</p>
              )
            ) : (
              item.children
            )}
          </TimelineCard>
        ))
      }
    </div>
  </section>

  <!-- Get In Touch Section -->

  <!-- CTA Section -->
  <section class='mb-16 text-center'>
    <Card class='from-accent2-100 to-accent3-100 bg-gradient-to-br p-8 md:p-12'>
      <h2 class='text-secondary mb-6 text-3xl font-black md:text-4xl'>
        Let's work <span class='text-accent-700'>together!</span>
      </h2>
      <p class='text-secondary mx-auto mb-8 max-w-2xl text-lg md:text-xl'>
        Ready to bring your ideas to life?
        <br />
        Check out my work and see if I'm a good fit for you and your team!
      </p>
      <div class='flex flex-wrap justify-center gap-4'>
        <Link
          href='/my-projects'
          variant='contained'
          size='large'
          class='px-8 py-4 text-xl text-balance sm:text-3xl'
        >
          View my projects 🚀
        </Link>
      </div>
    </Card>
  </section>
</HolyGrailLayout>

<style>
  /* Custom animations for enhanced interactivity */
  @keyframes float {
    0%,
    100% {
      transform: translateY(0px);
    }
    50% {
      transform: translateY(-10px);
    }
  }

  /* Add floating animation to fun facts cards on larger screens */
  @media (min-width: 768px) {
    #fun-facts > div > :nth-child(1) {
      animation: float 3s ease-in-out infinite;
      animation-delay: 0s;
    }
    #fun-facts > div > :nth-child(2) {
      animation: float 3s ease-in-out infinite;
      animation-delay: 0.5s;
    }
    #fun-facts > div > :nth-child(3) {
      animation: float 3s ease-in-out infinite;
      animation-delay: 1s;
    }
    #fun-facts > div > :nth-child(4) {
      animation: float 3s ease-in-out infinite;
      animation-delay: 1.5s;
    }
  }

  @media (prefers-reduced-motion) {
    #fun-facts > div > :nth-child(n) {
      animation: none;
    }
  }
</style>
